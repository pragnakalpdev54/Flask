{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"Flask Learning Roadmap","text":"<p>Welcome to the internal Flask training series. This guide outlines the path from beginner to expert.</p>"},{"location":"index.html#how-to-use-this-guide","title":"How to use this guide","text":"<ol> <li>Start sequentially: Do not skip Level 0 or 1. They lay the foundation.</li> <li>Do the Practice Problems: Reading is not enough. You must write code.</li> <li>Internal Projects: After Level 3, try building a small internal tool.</li> </ol>"},{"location":"index.html#the-modules","title":"The Modules","text":""},{"location":"index.html#level-0-beginner","title":"Level 0: Beginner","text":"<p>Prerequisites: Basic Python Goal: Build a \"Hello World\" API. Key Concepts: Virtual Envs, JSON, HTTP Methods.</p>"},{"location":"index.html#level-1-foundations","title":"Level 1: Foundations","text":"<p>Goal: Understand Routing and Requests. Key Concepts: <code>request</code> object, URL parameters, Blueprints (<code>user_bp</code>), Serving Static Files (No Jinja!).</p>"},{"location":"index.html#level-2a-intermediate-databases","title":"Level 2A: Intermediate - Databases","text":"<p>Goal: Connect to a Database properly. Key Concepts: Flask-SQLAlchemy, Migrations, Service Layer Pattern (Crucial).</p>"},{"location":"index.html#level-2b-intermediate-serialization","title":"Level 2B: Intermediate - Serialization","text":"<p>Goal: robust Error Handling and Validation. Key Concepts: Marshmallow Schemas, Global Error Handlers, hiding 500 errors.</p>"},{"location":"index.html#level-3-authentication","title":"Level 3: Authentication","text":"<p>Goal: Secure your API. Key Concepts: JWT vs Sessions, Bcrypt, Auth Service, Protecting Routes.</p>"},{"location":"index.html#level-4-scalable-structure","title":"Level 4: Scalable Structure","text":"<p>Goal: Write Professional, Scalable Code. Key Concepts: Application Factory Pattern, Solving Circular Imports, Project Layout.</p>"},{"location":"index.html#level-5-expert-extensions","title":"Level 5: Expert Extensions","text":"<p>Goal: Use power tools. Key Concepts: Flask-Restx (Swagger UI), Flask-Admin (Dashboards).</p>"},{"location":"index.html#final-project-idea-employee-directory-api","title":"Final Project Idea: Employee Directory API","text":"<p>Combine everything you learned to build an Employee API:</p> <ol> <li>Auth: Login/Register (Level 3)</li> <li>Users: Create/List Employees (Level 2A/2B)</li> <li>Search: Filter by department (Level 1)</li> <li>Docs: Auto-generated Swagger (Level 5)</li> <li>Structure: Use App Factory &amp; Service Layer (Level 4)</li> </ol> <p>Good luck!</p>"},{"location":"LEARNING_GUIDE.html","title":"Flask Learning Roadmap","text":"<p>Welcome to the internal Flask training series. This guide outlines the path from beginner to expert.</p>"},{"location":"LEARNING_GUIDE.html#how-to-use-this-guide","title":"How to use this guide","text":"<ol> <li>Start sequentially: Do not skip Level 0 or 1. They lay the foundation.</li> <li>Do the Practice Problems: Reading is not enough. You must write code.</li> <li>Internal Projects: After Level 3, try building a small internal tool.</li> </ol>"},{"location":"LEARNING_GUIDE.html#the-modules","title":"The Modules","text":""},{"location":"LEARNING_GUIDE.html#level-0-beginner","title":"Level 0: Beginner","text":"<p>Prerequisites: Basic Python Goal: Build a \"Hello World\" API. Key Concepts: Virtual Envs, JSON, HTTP Methods.</p>"},{"location":"LEARNING_GUIDE.html#level-1-foundations","title":"Level 1: Foundations","text":"<p>Goal: Understand Routing and Requests. Key Concepts: <code>request</code> object, URL parameters, Blueprints (<code>user_bp</code>), Serving Static Files (No Jinja!).</p>"},{"location":"LEARNING_GUIDE.html#level-2a-intermediate-databases","title":"Level 2A: Intermediate - Databases","text":"<p>Goal: Connect to a Database properly. Key Concepts: Flask-SQLAlchemy, Migrations, Service Layer Pattern (Crucial).</p>"},{"location":"LEARNING_GUIDE.html#level-2b-intermediate-serialization","title":"Level 2B: Intermediate - Serialization","text":"<p>Goal: robust Error Handling and Validation. Key Concepts: Marshmallow Schemas, Global Error Handlers, hiding 500 errors.</p>"},{"location":"LEARNING_GUIDE.html#level-3-authentication","title":"Level 3: Authentication","text":"<p>Goal: Secure your API. Key Concepts: JWT vs Sessions, Bcrypt, Auth Service, Protecting Routes.</p>"},{"location":"LEARNING_GUIDE.html#level-4-scalable-structure","title":"Level 4: Scalable Structure","text":"<p>Goal: Write Professional, Scalable Code. Key Concepts: Application Factory Pattern, Solving Circular Imports, Project Layout.</p>"},{"location":"LEARNING_GUIDE.html#level-5-expert-extensions","title":"Level 5: Expert Extensions","text":"<p>Goal: Use power tools. Key Concepts: Flask-Restx (Swagger UI), Flask-Admin (Dashboards).</p>"},{"location":"LEARNING_GUIDE.html#final-project-idea-employee-directory-api","title":"Final Project Idea: Employee Directory API","text":"<p>Combine everything you learned to build an Employee API:</p> <ol> <li>Auth: Login/Register (Level 3)</li> <li>Users: Create/List Employees (Level 2A/2B)</li> <li>Search: Filter by department (Level 1)</li> <li>Docs: Auto-generated Swagger (Level 5)</li> <li>Structure: Use App Factory &amp; Service Layer (Level 4)</li> </ol> <p>Good luck!</p>"},{"location":"LEVEL_0_BEGINNER.html","title":"Level 0: Complete Beginner - Python &amp; Web Fundamentals for Flask","text":""},{"location":"LEVEL_0_BEGINNER.html#goal","title":"Goal","text":"<p>Before diving into Flask, you need to understand the fundamentals. This level covers Python basics for web development, web concepts, and environment setup. By the end, you'll be ready to start building your first Flask API.</p>"},{"location":"LEVEL_0_BEGINNER.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>Why Learn This?</li> <li>Python Basics for Web Development</li> <li>Understanding the Web</li> <li>What is an API?</li> <li>Environment Setup Explained</li> <li>Hello World: Your First Flask API</li> <li>Practice Problems</li> <li>Trivia</li> </ol>"},{"location":"LEVEL_0_BEGINNER.html#why-learn-this","title":"Why Learn This?","text":""},{"location":"LEVEL_0_BEGINNER.html#what-is-flask","title":"What is Flask?","text":"<p>Flask is a lightweight WSGI web application framework. It is designed to make getting started quick and easy, with the ability to scale up to complex applications. It began as a simple wrapper around Werkzeug and Jinja and has become one of the most popular Python web application frameworks.</p>"},{"location":"LEVEL_0_BEGINNER.html#why-use-flask","title":"Why Use Flask?","text":"<ul> <li>Flexible: It gives you control over how you structure your application.</li> <li>Minimalistic: Core is simple and extensible.</li> <li>Great for APIs: Perfect for building RESTful services (our focus).</li> <li>Industry Standard: Used by companies like Netflix, Lyft, and Reddit.</li> </ul>"},{"location":"LEVEL_0_BEGINNER.html#python-basics-for-web-development","title":"Python Basics for Web Development","text":""},{"location":"LEVEL_0_BEGINNER.html#variables-and-json-structures","title":"Variables and JSON Structures","text":"<p>Why this matters: We will be building APIs that speak JSON. Python dictionaries are the closest relative to JSON.</p> <pre><code># Dictionaries - The core of our API responses\nuser = {\n    \"id\": 1,\n    \"username\": \"dev_user\",\n    \"is_active\": True,\n    \"roles\": [\"admin\", \"editor\"]\n}\n\n# Lists - Collections of resources\nusers = [\n    {\"id\": 1, \"username\": \"dev_user\"},\n    {\"id\": 2, \"username\": \"test_user\"}\n]\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#functions-as-endpoints","title":"Functions as Endpoints","text":"<p>Why this matters: In Flask, a \"route\" is just a function decorated with a URL path.</p> <pre><code># A normal function\ndef get_user_data(user_id):\n    return {\"id\": user_id, \"name\": \"Alice\"}\n\n# In Flask, it looks very similar:\n# @app.route(\"/users/&lt;int:user_id&gt;\")\n# def get_user(user_id):\n#     return {\"id\": user_id, \"name\": \"Alice\"}\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#understanding-the-web","title":"Understanding the Web","text":""},{"location":"LEVEL_0_BEGINNER.html#client-server-model","title":"Client-Server Model","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         HTTP Request          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Client  \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500&gt; \u2502 Server \u2502\n\u2502(Browser)\u2502                                \u2502(Flask) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 &lt;\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            HTTP Response (JSON)\n</code></pre> <p>Key Concept: In this course, we are building APIs. We will not be sending HTML pages (templates). We will send JSON data. The Client (Front-end or Mobile App) will take that JSON and display it.</p>"},{"location":"LEVEL_0_BEGINNER.html#what-is-an-api","title":"What is an API?","text":"<p>API (Application Programming Interface) is the messenger that takes requests and tells a system what you want to do and then returns the response back to you.</p>"},{"location":"LEVEL_0_BEGINNER.html#rest-api-basics","title":"REST API Basics","text":"<ul> <li>Resource: The \"thing\" you are interacting with (e.g., <code>User</code>, <code>Product</code>).</li> <li>Endpoint: The URL where the resource lives (e.g., <code>/api/users</code>).</li> <li>Method: The action (GET, POST, PUT, DELETE).</li> </ul>"},{"location":"LEVEL_0_BEGINNER.html#environment-setup-explained","title":"Environment Setup Explained","text":""},{"location":"LEVEL_0_BEGINNER.html#step-1-create-project-folder","title":"Step 1: Create Project Folder","text":"<pre><code>mkdir flask_learning\ncd flask_learning\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#step-2-create-virtual-environment","title":"Step 2: Create Virtual Environment","text":"<p>Always use a virtual environment to isolate dependencies.</p> <p>Windows:</p> <pre><code>python -m venv venv\nvenv\\Scripts\\activate\n</code></pre> <p>Linux/Mac:</p> <pre><code>python3 -m venv venv\nsource venv/bin/activate\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#step-3-install-flask","title":"Step 3: Install Flask","text":"<pre><code>pip install flask\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#hello-world-your-first-flask-api","title":"Hello World: Your First Flask API","text":"<p>Let's create a minimal Flask application that returns JSON.</p> <ol> <li>Create a file named <code>app.py</code>.</li> <li>Add the following code:</li> </ol> <pre><code>from flask import Flask, jsonify\n\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef home():\n    \"\"\"\n    Root endpoint.\n    Returns a simple JSON message.\n    \"\"\"\n    return jsonify({\n        \"message\": \"Welcome to the Flask API!\",\n        \"status\": \"success\"\n    })\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#run-it","title":"Run it","text":"<pre><code>python app.py\n</code></pre>"},{"location":"LEVEL_0_BEGINNER.html#test-it","title":"Test it","text":"<p>Open your browser or Postman and go to <code>http://127.0.0.1:5000/</code>.</p> <p>You should see:</p> <pre><code>{\n  \"message\": \"Welcome to the Flask API!\",\n  \"status\": \"success\"\n}\n</code></pre> <p>Note: Notice we used <code>jsonify</code>. This is a helper that converts Python dictionaries to proper JSON responses with the correct Content-Type header (<code>application/json</code>). Rule: Always return JSON. Never return raw strings or HTML for APIs.</p>"},{"location":"LEVEL_0_BEGINNER.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_0_BEGINNER.html#problem-1-setup","title":"Problem 1: Setup","text":"<ol> <li>Create a new virtual environment.</li> <li>Install Flask.</li> <li>Freeze requirements to <code>requirements.txt</code>.</li> </ol>"},{"location":"LEVEL_0_BEGINNER.html#problem-2-new-endpoint","title":"Problem 2: New Endpoint","text":"<ol> <li>Add a new route <code>/ping</code> to your <code>app.py</code>.</li> <li>It should return <code>{\"pong\": true}</code>.</li> </ol>"},{"location":"LEVEL_0_BEGINNER.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_0_BEGINNER.html#question-1","title":"Question 1","text":"<p>What function do we use to return JSON in Flask?</p> <ul> <li>[ ] <code>json.dumps()</code></li> <li>[x] <code>jsonify()</code></li> <li>[ ] <code>return_json()</code></li> <li>[ ] <code>flask.json()</code></li> </ul> <p>Explanation: <code>jsonify</code> serializes data to JSON and sets the generic Content-Type header to <code>application/json</code>.</p>"},{"location":"LEVEL_0_BEGINNER.html#question-2","title":"Question 2","text":"<p>Why do we not use HTML templates in this course?</p> <ul> <li>[ ] HTML is too hard</li> <li>[x] We are building an API that serves data (JSON) to any client (Web, Mobile, etc), decoupling the UI from the Logic.</li> <li>[ ] Flask cannot handle HTML</li> </ul>"},{"location":"LEVEL_0_BEGINNER.html#question-3","title":"Question 3","text":"<p>What decorates a function to make it a route?</p> <ul> <li>[ ] <code>@app.endpoint</code></li> <li>[ ] <code>@flask.route</code></li> <li>[x] <code>@app.route</code></li> <li>[ ] <code>@url_path</code></li> </ul>"},{"location":"LEVEL_1_FOUNDATIONS.html","title":"Level 1: Flask Foundations - Routing &amp; Requests","text":""},{"location":"LEVEL_1_FOUNDATIONS.html#goal","title":"Goal","text":"<p>In this level, we will learn how to handle different types of requests, work with data sent by clients, and organize our application using Blueprints.</p> <p>Core Rules for this Level:</p> <ol> <li>API First: We only speak JSON.</li> <li>Thin Routes: Routes should only parse input and return output.</li> <li>No Jinja: We serve static HTML/JS if we need a UI.</li> </ol>"},{"location":"LEVEL_1_FOUNDATIONS.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>Routing Basics</li> <li>Handling Requests (The Input)</li> <li>Building Responses (The Output)</li> <li>Structuring with Blueprints</li> <li>Serving Static Files</li> <li>Practice Problems</li> </ol>"},{"location":"LEVEL_1_FOUNDATIONS.html#routing-basics","title":"Routing Basics","text":""},{"location":"LEVEL_1_FOUNDATIONS.html#methods","title":"Methods","text":"<p>By default, a route only answers to GET. You must specify others.</p> <pre><code>from flask import Flask, jsonify, request\n\napp = Flask(__name__)\n\n@app.route(\"/books\", methods=[\"GET\"])\ndef get_books():\n    return jsonify({\"message\": \"Get all books\"})\n\n@app.route(\"/books\", methods=[\"POST\"])\ndef create_book():\n    return jsonify({\"message\": \"Create a book\"}), 201\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#dynamic-urls","title":"Dynamic URLs","text":"<p>Capture values from the URL.</p> <pre><code>@app.route(\"/books/&lt;int:book_id&gt;\", methods=[\"GET\"])\ndef get_book(book_id):\n    # book_id is passed as an integer argument\n    return jsonify({\"id\": book_id, \"title\": \"Sample Book\"})\n</code></pre> <p>Converters: <code>string</code> (default), <code>int</code>, <code>float</code>, <code>path</code>, <code>uuid</code>.</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#handling-requests-the-input","title":"Handling Requests (The Input)","text":"<p>In an API, we mostly care about JSON Body and Query Parameters.</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#1-json-body-postput","title":"1. JSON Body (POST/PUT)","text":"<p>Used when creating or updating resources.</p> <pre><code>@app.route(\"/users\", methods=[\"POST\"])\ndef create_user():\n    # request.get_json() parses the JSON body\n    data = request.get_json()\n\n    username = data.get(\"username\")\n    email = data.get(\"email\")\n\n    # In real app: Validate and Save to DB\n\n    return jsonify({\"status\": \"created\", \"username\": username}), 201\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#2-query-parameters-get","title":"2. Query Parameters (GET)","text":"<p>Used for filtering or pagination (e.g., <code>/users?page=2&amp;role=admin</code>).</p> <pre><code>@app.route(\"/users\", methods=[\"GET\"])\ndef list_users():\n    # request.args is a dictionary-like object\n    page = request.args.get(\"page\", 1, type=int)\n    role = request.args.get(\"role\")\n\n    return jsonify({\"page\": page, \"filter_role\": role})\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#building-responses-the-output","title":"Building Responses (The Output)","text":"<p>Always return <code>jsonify</code> and a proper Status Code.</p> Code Meaning Usage 200 OK Standard success 201 Created resource created successfully 400 Bad Request Client sent invalid JSON or missing fields 404 Not Found Resource does not exist 500 Server Error Something broke (Hide details from user!) <pre><code>@app.route(\"/orders\", methods=[\"POST\"])\ndef create_order():\n    data = request.get_json()\n\n    if not data or \"item\" not in data:\n        # 400 Bad Request\n        return jsonify({\"error\": \"Missing 'item' field\"}), 400\n\n    return jsonify({\"id\": 123, \"status\": \"pending\"}), 201\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#structuring-with-blueprints","title":"Structuring with Blueprints","text":"<p>As your app grows, you cannot keep everything in <code>app.py</code>. Blueprints allow you to organize your routes into separate files (modules).</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#directory-structure","title":"Directory Structure","text":"<pre><code>project/\n\u251c\u2500\u2500 app.py\n\u2514\u2500\u2500 routes/\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 user_routes.py\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#1-create-a-blueprint-routesuser_routespy","title":"1. Create a Blueprint (<code>routes/user_routes.py</code>)","text":"<pre><code>from flask import Blueprint, jsonify\n\n# Define the blueprint\nuser_bp = Blueprint(\"users\", __name__, url_prefix=\"/users\")\n\n@user_bp.route(\"/\", methods=[\"GET\"])\ndef get_users():\n    return jsonify({\"users\": []})\n\n@user_bp.route(\"/&lt;int:id&gt;\", methods=[\"GET\"])\ndef get_user(id):\n    return jsonify({\"id\": id})\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#2-register-it-in-apppy","title":"2. Register it in <code>app.py</code>","text":"<pre><code>from flask import Flask\nfrom routes.user_routes import user_bp\n\napp = Flask(__name__)\n\n# Register the blueprint\napp.register_blueprint(user_bp)\n# Now routes are accessible at /users and /users/&lt;id&gt;\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#serving-static-files","title":"Serving Static Files","text":"<p>Since we do not use Jinja templates, we handle UI by serving static HTML/JS files that consume our JSON API.</p> <p>Place files in a <code>static</code> folder:</p> <pre><code>project/\n\u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 index.html\n\u2502   \u2514\u2500\u2500 app.js\n\u2514\u2500\u2500 app.py\n</code></pre>"},{"location":"LEVEL_1_FOUNDATIONS.html#serving-the-entry-point","title":"Serving the Entry Point","text":"<pre><code>@app.route(\"/\")\ndef index():\n    # Send the static index.html file\n    return app.send_static_file(\"index.html\")\n</code></pre> <p>Your <code>index.html</code> should use JavaScript (<code>fetch</code> or <code>axios</code>) to call your API endpoints (e.g., <code>/users</code>) and display data.</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_1_FOUNDATIONS.html#problem-1-calculator-api","title":"Problem 1: Calculator API","text":"<p>Create an endpoint <code>/calculate</code> that accepts a POST request with JSON: <code>{\"operation\": \"add\", \"x\": 10, \"y\": 5}</code> And returns: <code>{\"result\": 15}</code>. Support add, subtract, multiply, divide. Return 400 for invalid operations.</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#problem-2-blueprint-organization","title":"Problem 2: Blueprint Organization","text":"<p>Refactor Problem 1 into a blueprint structure with a URL prefix <code>/math</code>.</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#problem-3-query-params","title":"Problem 3: Query Params","text":"<p>Create a route <code>/search</code> that takes a query param <code>q</code>. If <code>q</code> is missing, return error 400. If present, return <code>{\"query\": q}</code>.</p>"},{"location":"LEVEL_1_FOUNDATIONS.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_1_FOUNDATIONS.html#question-1","title":"Question 1","text":"<p>How do you access the JSON body sent by a client?</p> <ul> <li>[ ] <code>request.body</code></li> <li>[x] <code>request.get_json()</code></li> <li>[ ] <code>request.json_data</code></li> <li>[ ] <code>json.load(request)</code></li> </ul>"},{"location":"LEVEL_1_FOUNDATIONS.html#question-2","title":"Question 2","text":"<p>What is the purpose of a Blueprint?</p> <ul> <li>[ ] To design the database</li> <li>[ ] To create HTML templates</li> <li>[x] To organize routes into modular components</li> <li>[ ] To handle authentication</li> </ul>"},{"location":"LEVEL_1_FOUNDATIONS.html#question-3","title":"Question 3","text":"<p>If a client sends invalid data, what status code should you return?</p> <ul> <li>[ ] 200 OK</li> <li>[ ] 500 Server Error</li> <li>[x] 400 Bad Request</li> <li>[ ] 404 Not Found</li> </ul>"},{"location":"LEVEL_2A_INTERMEDIATE.html","title":"Level 2A: Intermediate - Databases &amp; The Service Layer","text":""},{"location":"LEVEL_2A_INTERMEDIATE.html#goal","title":"Goal","text":"<p>In this level, we connect our Flask application to a Relational Database using Flask-SQLAlchemy. Crucially, we will learn the Service Layer Pattern to keep our code clean, scalable, and professional.</p> <p>Strict Rules:</p> <ol> <li>Thin Routes: Routes never access the database directly.</li> <li>Service Layer: All business logic and DB calls reside in services.</li> <li>ORM Only: Use SQLAlchemy models, not raw SQL.</li> </ol>"},{"location":"LEVEL_2A_INTERMEDIATE.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>Setting Up Flask-SQLAlchemy</li> <li>Defining Models</li> <li>Database Migrations</li> <li>The Service Layer Pattern</li> <li>Refactoring: The Right Way</li> <li>Practice Problems</li> </ol>"},{"location":"LEVEL_2A_INTERMEDIATE.html#setting-up-flask-sqlalchemy","title":"Setting Up Flask-SQLAlchemy","text":"<p>Install dependencies:</p> <pre><code>pip install flask-sqlalchemy flask-migrate psycopg2-binary\n</code></pre> <p>(We use psycopg2 for PostgreSQL, but strict ORM usage means we can switch easily)</p>"},{"location":"LEVEL_2A_INTERMEDIATE.html#configuration","title":"Configuration","text":"<p>In <code>app.py</code> or <code>extensions.py</code> (better structure):</p> <pre><code>from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_migrate import Migrate\n\ndb = SQLAlchemy()\nmigrate = Migrate()\n\ndef create_app():\n    app = Flask(__name__)\n    # Configure your DB URI\n    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///app.db' # or postgresql://...\n\n    db.init_app(app)\n    migrate.init_app(app, db)\n\n    return app\n</code></pre>"},{"location":"LEVEL_2A_INTERMEDIATE.html#defining-models","title":"Defining Models","text":"<p>Models are Python classes that map to database tables.</p> <pre><code># models.py\nfrom extensions import db\n\nclass User(db.Model):\n    __tablename__ = 'users'\n\n    id = db.Column(db.Integer, primary_key=True)\n    username = db.Column(db.String(80), unique=True, nullable=False)\n    email = db.Column(db.String(120), unique=True, nullable=False)\n    is_active = db.Column(db.Boolean, default=True)\n\n    def __repr__(self):\n        return f'&lt;User {self.username}&gt;'\n</code></pre>"},{"location":"LEVEL_2A_INTERMEDIATE.html#database-migrations","title":"Database Migrations","text":"<p>Never create tables manually. Use Migrations.</p> <ol> <li>Initialize: <code>flask db init</code> (One time)</li> <li>Migrate: <code>flask db migrate -m \"Initial migration\"</code> (Create script)</li> <li>Upgrade: <code>flask db upgrade</code> (Apply changes to DB)</li> </ol>"},{"location":"LEVEL_2A_INTERMEDIATE.html#the-service-layer-pattern","title":"The Service Layer Pattern","text":"<p>This is the most important architectural rule in our project.</p>"},{"location":"LEVEL_2A_INTERMEDIATE.html#the-bad-way-fat-routes","title":"\u274c The Bad Way (Fat Routes)","text":"<p>Do NOT do this:</p> <pre><code># BAD CODE - DO NOT USE\n@app.route('/users', methods=['POST'])\ndef create_user():\n    data = request.get_json()\n    # Business logic in route!\n    if User.query.filter_by(email=data['email']).first():\n        return jsonify({\"error\": \"Email exists\"}), 400\n\n    # DB access in route!\n    new_user = User(username=data['username'], email=data['email'])\n    db.session.add(new_user)\n    db.session.commit()\n\n    return jsonify({\"id\": new_user.id}), 201\n</code></pre>"},{"location":"LEVEL_2A_INTERMEDIATE.html#the-good-way-thin-routes-service-layer","title":"\u2705 The Good Way (Thin Routes + Service Layer)","text":"<p>1. Create the Service (<code>services/user_service.py</code>)</p> <pre><code>from models import User, db\n\nclass UserService:\n    @staticmethod\n    def create_user(username, email):\n        \"\"\"\n        Handles business logic for creating a user.\n        \"\"\"\n        # Validation Logic\n        if User.query.filter_by(email=email).first():\n            raise ValueError(\"Email already exists\")\n\n        # DB Logic\n        new_user = User(username=username, email=email)\n        db.session.add(new_user)\n        db.session.commit()\n\n        return new_user\n\n    @staticmethod\n    def get_all_users():\n        return User.query.all()\n</code></pre> <p>2. Call it from the Route (<code>routes/user_routes.py</code>)</p> <pre><code>from flask import Blueprint, request, jsonify\nfrom services.user_service import UserService\n\nuser_bp = Blueprint('users', __name__)\n\n@user_bp.route('/', methods=['POST'])\ndef create_user():\n    data = request.get_json()\n\n    try:\n        # Route just delegates to Service\n        user = UserService.create_user(\n            username=data['username'], \n            email=data['email']\n        )\n        return jsonify({\"id\": user.id, \"message\": \"Created\"}), 201\n\n    except ValueError as e:\n        # Simple Error Handling (We will improve this in Level 2B)\n        return jsonify({\"error\": str(e)}), 400\n</code></pre>"},{"location":"LEVEL_2A_INTERMEDIATE.html#why","title":"Why?","text":"<ol> <li>Reusability: You can call <code>UserService.create_user</code> from a CLI command or a test or another service.</li> <li>Testing: You can test <code>UserService</code> without faking HTTP requests.</li> <li>Maintainability: Routes stay simple and clean.</li> </ol>"},{"location":"LEVEL_2A_INTERMEDIATE.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_2A_INTERMEDIATE.html#problem-1-book-model","title":"Problem 1: Book Model","text":"<p>Create a <code>Book</code> model with <code>title</code>, <code>author</code>, and <code>isbn</code> (unique). Run migrations.</p>"},{"location":"LEVEL_2A_INTERMEDIATE.html#problem-2-book-service","title":"Problem 2: Book Service","text":"<p>Create a <code>BookService</code> with methods:</p> <ul> <li><code>add_book(title, author, isbn)</code></li> <li><code>get_books_by_author(author)</code></li> </ul> <p>Ensure <code>add_book</code> raises an error if ISBN already exists.</p>"},{"location":"LEVEL_2A_INTERMEDIATE.html#problem-3-refactor","title":"Problem 3: Refactor","text":"<p>Refactor your Calculator practice from Level 1 to use a <code>CalculationService</code>.</p>"},{"location":"LEVEL_2A_INTERMEDIATE.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_2A_INTERMEDIATE.html#question-1","title":"Question 1","text":"<p>Where should database queries reside?</p> <ul> <li>[ ] In the Route function</li> <li>[ ] In the Template</li> <li>[x] In the Service Layer</li> <li>[ ] In the <code>app.py</code></li> </ul>"},{"location":"LEVEL_2A_INTERMEDIATE.html#question-2","title":"Question 2","text":"<p>What command applies changes to the database?</p> <ul> <li>[ ] <code>flask db init</code></li> <li>[ ] <code>flask db migrate</code></li> <li>[x] <code>flask db upgrade</code></li> <li>[ ] <code>flask run</code></li> </ul>"},{"location":"LEVEL_2A_INTERMEDIATE.html#question-3","title":"Question 3","text":"<p>Why do we avoid \"Fat Routes\"?</p> <ul> <li>[ ] They take up too much disk space</li> <li>[x] They mix business logic with HTTP logic, making code hard to test and reuse</li> <li>[ ] Flask forbids them</li> </ul>"},{"location":"LEVEL_2B_INTERMEDIATE.html","title":"Level 2B: Intermediate - Serialization &amp; Error Handling","text":""},{"location":"LEVEL_2B_INTERMEDIATE.html#goal","title":"Goal","text":"<p>In this level, we make our API robust. We will use Marshmallow for validation (incoming data) and serialization (outgoing data). We will also strictly implement Global Error Handling so users never see standard internal server errors.</p> <p>Strict Rules:</p> <ol> <li>Never return Model objects directly: Always serialize them to JSON.</li> <li>Never expose Stack Traces: Catch all errors and return generic JSON messages.</li> <li>Validate Inputs: Trust no one.</li> </ol>"},{"location":"LEVEL_2B_INTERMEDIATE.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>Why Marshmallow?</li> <li>Defining Schemas</li> <li>Validation (Input)</li> <li>Serialization (Output)</li> <li>Global Error Handling</li> <li>Practice Problems</li> </ol>"},{"location":"LEVEL_2B_INTERMEDIATE.html#why-marshmallow","title":"Why Marshmallow?","text":"<p>SQLAlchemy Models are Python Objects. APIs need JSON. Marshmallow bridges this gap.</p> <ul> <li>Serialization: Object -&gt; JSON</li> <li>Deserialization: JSON -&gt; Object (with Validation!)</li> </ul> <p>Install it:</p> <pre><code>pip install flask-marshmallow marshmallow-sqlalchemy\n</code></pre>"},{"location":"LEVEL_2B_INTERMEDIATE.html#defining-schemas","title":"Defining Schemas","text":"<p>Schemas usually sit near your models or in a <code>schemas/</code> folder.</p> <pre><code>from flask_marshmallow import Marshmallow\nfrom models import User\n\nma = Marshmallow()\n\nclass UserSchema(ma.SQLAlchemyAutoSchema):\n    class Meta:\n        model = User\n        load_instance = True  # Optional: deserialize to model instances\n        # exclude = ('password_hash',) # Hiding fields\n\n# Initialize schemas\nuser_schema = UserSchema()\nusers_schema = UserSchema(many=True)\n</code></pre>"},{"location":"LEVEL_2B_INTERMEDIATE.html#validation-input","title":"Validation (Input)","text":"<p>Use the schema to validate incoming JSON before it reaches your Service Layer.</p> <pre><code>@user_bp.route('/', methods=['POST'])\ndef create_user():\n    json_data = request.get_json()\n\n    try:\n        # Validate data\n        data = user_schema.load(json_data)\n    except ValidationError as err:\n        return jsonify(err.messages), 400\n\n    # Proceed to service...\n    user = UserService.create_user(data['username'], data['email'])\n</code></pre>"},{"location":"LEVEL_2B_INTERMEDIATE.html#serialization-output","title":"Serialization (Output)","text":"<p>Never manually build dictionaries like <code>{'id': user.id, ...}</code>. Use the schema.</p> <pre><code>@user_bp.route('/', methods=['GET'])\ndef get_users():\n    users = UserService.get_all_users()\n\n    # Dump list of users\n    result = users_schema.dump(users)\n    return jsonify(result), 200\n\n@user_bp.route('/&lt;int:id&gt;', methods=['GET'])\ndef get_user(id):\n    user = UserService.get_user_by_id(id)\n\n    # Dump single user\n    result = user_schema.dump(user)\n    return jsonify(result), 200\n</code></pre>"},{"location":"LEVEL_2B_INTERMEDIATE.html#global-error-handling","title":"Global Error Handling","text":"<p>Rule: User should not be able to see the internal server errors on UI.</p> <p>Instead of <code>try-except</code> in every route, use <code>errorhandler</code>.</p>"},{"location":"LEVEL_2B_INTERMEDIATE.html#1-create-a-custom-exception","title":"1. Create a Custom Exception","text":"<pre><code># errors.py\nclass AppError(Exception):\n    def __init__(self, message, status_code=400):\n        super().__init__(message)\n        self.message = message\n        self.status_code = status_code\n</code></pre>"},{"location":"LEVEL_2B_INTERMEDIATE.html#2-update-service-to-raise-it","title":"2. Update Service to raise it","text":"<pre><code># services/user_service.py\nfrom errors import AppError\n\ndef get_user_by_id(user_id):\n    user = User.query.get(user_id)\n    if not user:\n        raise AppError(\"User not found\", 404)\n    return user\n</code></pre>"},{"location":"LEVEL_2B_INTERMEDIATE.html#3-catch-it-globally-in-apppy","title":"3. Catch it Globally in <code>app.py</code>","text":"<pre><code>from errors import AppError\n\ndef create_app():\n    app = Flask(__name__)\n    # ... config ...\n\n    @app.errorhandler(AppError)\n    def handle_app_error(e):\n        return jsonify({\n            \"error\": e.message,\n            \"code\": e.status_code\n        }), e.status_code\n\n    @app.errorhandler(500)\n    def handle_500(e):\n        # Log the real error to a file/logging service\n        # app.logger.error(e)\n        return jsonify({\"error\": \"Internal Server Error\"}), 500\n\n    @app.errorhandler(404)\n    def handle_404(e):\n        return jsonify({\"error\": \"Resource not found\"}), 404\n\n    return app\n</code></pre> <p>Result: Even if your code crashes, the user sees <code>{\"error\": \"Internal Server Error\"}</code> (JSON), not a scary HTML stack trace.</p>"},{"location":"LEVEL_2B_INTERMEDIATE.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_2B_INTERMEDIATE.html#problem-1-book-schema","title":"Problem 1: Book Schema","text":"<p>Create a <code>BookSchema</code> for your Book model. Configure it to auto-generate from the SQLAlchemy model.</p>"},{"location":"LEVEL_2B_INTERMEDIATE.html#problem-2-validate-implementation","title":"Problem 2: Validate Implementation","text":"<p>Update your <code>create_book</code> route to use <code>book_schema.load()</code>. Try sending invalid data (missing title) and confirm you get a 400 JSON response with validation errors.</p>"},{"location":"LEVEL_2B_INTERMEDIATE.html#problem-3-404-handler","title":"Problem 3: 404 Handler","text":"<p>Implement a global 404 handler that returns <code>{\"error\": \"This endpoint does not exist\"}</code>. Use Postman to trigger it.</p>"},{"location":"LEVEL_2B_INTERMEDIATE.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_2B_INTERMEDIATE.html#question-1","title":"Question 1","text":"<p>What is the method to convert an Object to JSON using Marshmallow?</p> <ul> <li>[ ] <code>schema.load()</code></li> <li>[x] <code>schema.dump()</code></li> <li>[ ] <code>schema.json()</code></li> <li>[ ] <code>schema.serialize()</code></li> </ul>"},{"location":"LEVEL_2B_INTERMEDIATE.html#question-2","title":"Question 2","text":"<p>What allows us to catch exceptions globally?</p> <ul> <li>[ ] <code>@app.route</code></li> <li>[ ] <code>@app.exception</code></li> <li>[x] <code>@app.errorhandler</code></li> <li>[ ] <code>try...except</code> block in <code>main</code></li> </ul>"},{"location":"LEVEL_2B_INTERMEDIATE.html#question-3","title":"Question 3","text":"<p>If a validation error occurs during <code>schema.load()</code>, what exception is raised?</p> <ul> <li>[ ] <code>ValueError</code></li> <li>[x] <code>ValidationError</code></li> <li>[ ] <code>TypeError</code></li> <li>[ ] <code>JsonError</code></li> </ul>"},{"location":"LEVEL_3_AUTHENTICATION.html","title":"Level 3: Authentication &amp; Security","text":""},{"location":"LEVEL_3_AUTHENTICATION.html#goal","title":"Goal","text":"<p>In this level, we secure our API. Since we are building a stateless JSON API, we will use JWT (JSON Web Tokens) instead of Session-based auth (Flask-Login). We will also implement a strict Authentication Service.</p> <p>Strict Rules:</p> <ol> <li>No Sessions: Use JWTs for API authentication.</li> <li>Passwords: Never store plain passwords. Use Bcrypt.</li> <li>Auth Service: Crypto and Token logic belongs in a service, not the route.</li> </ol>"},{"location":"LEVEL_3_AUTHENTICATION.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>Password Hashing</li> <li>JWT Basics</li> <li>The Auth Service</li> <li>Protecting Routes</li> <li>Practice Problems</li> </ol>"},{"location":"LEVEL_3_AUTHENTICATION.html#password-hashing","title":"Password Hashing","text":"<p>We need <code>flask-bcrypt</code> to hash passwords.</p>"},{"location":"LEVEL_3_AUTHENTICATION.html#setup","title":"Setup","text":"<pre><code>pip install flask-bcrypt\n</code></pre> <p>In <code>extensions.py</code>:</p> <pre><code>from flask_bcrypt import Bcrypt\nbcrypt = Bcrypt()\n</code></pre>"},{"location":"LEVEL_3_AUTHENTICATION.html#usage","title":"Usage","text":"<pre><code># Hashing (Registration)\npw_hash = bcrypt.generate_password_hash('s3cret').decode('utf-8')\n\n# Checking (Login)\nis_valid = bcrypt.check_password_hash(pw_hash, 's3cret')\n</code></pre>"},{"location":"LEVEL_3_AUTHENTICATION.html#jwt-basics","title":"JWT Basics","text":"<p>We use <code>flask-jwt-extended</code> for handling tokens.</p>"},{"location":"LEVEL_3_AUTHENTICATION.html#setup_1","title":"Setup","text":"<pre><code>pip install flask-jwt-extended\n</code></pre> <p>In <code>extensions.py</code>:</p> <pre><code>from flask_jwt_extended import JWTManager\njwt = JWTManager()\n</code></pre> <p>In <code>app.py</code> (Factory):</p> <pre><code>def create_app():\n    # ...\n    app.config[\"JWT_SECRET_KEY\"] = \"super-secret-key\"  # Change this!\n    jwt.init_app(app)\n    # ...\n</code></pre>"},{"location":"LEVEL_3_AUTHENTICATION.html#the-auth-service","title":"The Auth Service","text":"<p>We must isolate authentication logic.</p>"},{"location":"LEVEL_3_AUTHENTICATION.html#servicesauth_servicepy","title":"<code>services/auth_service.py</code>","text":"<pre><code>from models import User, db\nfrom extensions import bcrypt\nfrom flask_jwt_extended import create_access_token\nfrom errors import AppError\n\nclass AuthService:\n    @staticmethod\n    def register_user(username, email, password):\n        # 1. Check if user exists\n        if User.query.filter_by(email=email).first():\n            raise AppError(\"Email already exists\", 400)\n\n        # 2. Hash password\n        hashed_pw = bcrypt.generate_password_hash(password).decode('utf-8')\n\n        # 3. Create User\n        user = User(username=username, email=email, password=hashed_pw)\n        db.session.add(user)\n        db.session.commit()\n\n        return user\n\n    @staticmethod\n    def login_user(email, password):\n        # 1. Find User\n        user = User.query.filter_by(email=email).first()\n\n        # 2. Check Password\n        if not user or not bcrypt.check_password_hash(user.password, password):\n            raise AppError(\"Invalid credentials\", 401)\n\n        # 3. Generate Token\n        access_token = create_access_token(identity=user.id)\n        return {\"access_token\": access_token, \"user_id\": user.id}\n</code></pre>"},{"location":"LEVEL_3_AUTHENTICATION.html#protecting-routes","title":"Protecting Routes","text":"<p>Now we use the Auth Service in our routes and protect endpoints.</p>"},{"location":"LEVEL_3_AUTHENTICATION.html#routesauth_routespy","title":"<code>routes/auth_routes.py</code>","text":"<pre><code>from flask import Blueprint, request, jsonify\nfrom flask_jwt_extended import jwt_required, get_jwt_identity\nfrom services.auth_service import AuthService\nfrom services.user_service import UserService\n\nauth_bp = Blueprint('auth', __name__)\n\n@auth_bp.route('/register', methods=['POST'])\ndef register():\n    data = request.get_json()\n    # Call Service\n    user = AuthService.register_user(\n        data['username'], data['email'], data['password']\n    )\n    return jsonify({\"message\": \"User registered\"}), 201\n\n@auth_bp.route('/login', methods=['POST'])\ndef login():\n    data = request.get_json()\n    # Call Service\n    result = AuthService.login_user(data['email'], data['password'])\n    return jsonify(result), 200\n</code></pre>"},{"location":"LEVEL_3_AUTHENTICATION.html#protecting-an-endpoint-jwt_required","title":"Protecting an Endpoint (<code>jwt_required</code>)","text":"<pre><code>@auth_bp.route('/me', methods=['GET'])\n@jwt_required()\ndef get_me():\n    # Get ID from token\n    current_user_id = get_jwt_identity()\n\n    # Use UserService to get details\n    user = UserService.get_user_by_id(current_user_id)\n\n    return jsonify({\"username\": user.username, \"email\": user.email})\n</code></pre>"},{"location":"LEVEL_3_AUTHENTICATION.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_3_AUTHENTICATION.html#problem-1-integration","title":"Problem 1: Integration","text":"<p>Install <code>flask-bcrypt</code> and <code>flask-jwt-extended</code>. Update <code>app.py</code> to initialize them.</p>"},{"location":"LEVEL_3_AUTHENTICATION.html#problem-2-login-flow","title":"Problem 2: Login Flow","text":"<p>Implement the <code>login</code> route using the <code>AuthService</code>. Test it with Postman:</p> <ol> <li>Register a user (writes to DB with hashed PW).</li> <li>Login with correct password -&gt; Get Token.</li> <li>Login with wrong password -&gt; Get 401 Error.</li> </ol>"},{"location":"LEVEL_3_AUTHENTICATION.html#problem-3-protected-route","title":"Problem 3: Protected Route","text":"<p>Create a route <code>/secret</code> that returns <code>{\"message\": \"Top Secret\"}</code>. Add <code>@jwt_required()</code>. Try accessing it without a token (401) and with a token (200).</p>"},{"location":"LEVEL_3_AUTHENTICATION.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_3_AUTHENTICATION.html#question-1","title":"Question 1","text":"<p>Why do we use JWTs instead of Sessions for APIs?</p> <ul> <li>[x] JWTs are stateless and work well with mobile/frontend apps on potential separate domains.</li> <li>[ ] Sessions are less secure.</li> <li>[ ] JWTs are encrypted (They are signed, not encrypted by default!).</li> <li>[ ] Flask doesn't support sessions.</li> </ul>"},{"location":"LEVEL_3_AUTHENTICATION.html#question-2","title":"Question 2","text":"<p>What function generates the hash for a password?</p> <ul> <li>[ ] <code>bcrypt.check_password_hash</code></li> <li>[x] <code>bcrypt.generate_password_hash</code></li> <li>[ ] <code>jwt.create_token</code></li> <li>[ ] <code>hashlib.sha256</code></li> </ul>"},{"location":"LEVEL_3_AUTHENTICATION.html#question-3","title":"Question 3","text":"<p>How do you access the user ID inside a protected route?</p> <ul> <li>[ ] <code>request.user_id</code></li> <li>[x] <code>get_jwt_identity()</code></li> <li>[ ] <code>jwt.get_id()</code></li> <li>[ ] <code>current_user.id</code> (This is for Flask-Login)</li> </ul>"},{"location":"LEVEL_4_SCALABLE.html","title":"Level 4: Scalable Structure &amp; The Application Factory","text":""},{"location":"LEVEL_4_SCALABLE.html#goal","title":"Goal","text":"<p>In this level, we graduate from \"Scripts\" to \"Applications\". We will learn the Application Factory Pattern to allow running multiple instances (dev, test, prod). Most importantly, we will solve the #1 beginner nightmare: Circular Imports.</p>"},{"location":"LEVEL_4_SCALABLE.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>The Circular Import Problem</li> <li>The Application Factory Pattern</li> <li>Project Directory Structure</li> <li>Managing Extensions</li> <li>Configuration Management</li> <li>Practice Problems</li> </ol>"},{"location":"LEVEL_4_SCALABLE.html#the-circular-import-problem","title":"The Circular Import Problem","text":""},{"location":"LEVEL_4_SCALABLE.html#the-scenario","title":"The Scenario","text":"<ol> <li><code>app.py</code> imports <code>db</code> from <code>models.py</code></li> <li><code>models.py</code> imports <code>app</code> from <code>app.py</code> (to use config)</li> <li>CRASH: <code>ImportError: cannot import name...</code></li> </ol>"},{"location":"LEVEL_4_SCALABLE.html#the-solution","title":"The Solution","text":"<p>We must decouple the Extension Creation from the App Creation.</p>"},{"location":"LEVEL_4_SCALABLE.html#managing-extensions","title":"Managing Extensions","text":"<p>Create a separate file <code>extensions.py</code>. This file instantiates plugins without attaching them to an app.</p> <pre><code># extensions.py\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_migrate import Migrate\nfrom flask_jwt_extended import JWTManager\nfrom flask_marshmallow import Marshmallow\n\n# Unbound extensions\ndb = SQLAlchemy()\nmigrate = Migrate()\njwt = JWTManager()\nma = Marshmallow()\n</code></pre> <p>Now <code>models.py</code> can import <code>db</code> from <code>extensions.py</code>. <code>extensions.py</code> imports nothing. No cycles!</p>"},{"location":"LEVEL_4_SCALABLE.html#the-application-factory-pattern","title":"The Application Factory Pattern","text":"<p>Instead of creating a global <code>app</code> object, we put creation logic in a function <code>create_app()</code>.</p>"},{"location":"LEVEL_4_SCALABLE.html#apppy-or-application__init__py","title":"<code>app.py</code> (or <code>application/__init__.py</code>)","text":"<pre><code>from flask import Flask\nfrom extensions import db, migrate, jwt, ma\nfrom routes.user_routes import user_bp\nfrom routes.auth_routes import auth_bp\nfrom app_config import Config\n\ndef create_app(config_class=Config):\n    app = Flask(__name__)\n\n    # 1. Load Configuration\n    app.config.from_object(config_class)\n\n    # 2. Init Extensions\n    db.init_app(app)\n    migrate.init_app(app, db)\n    jwt.init_app(app)\n    ma.init_app(app)\n\n    # 3. Register Blueprints\n    app.register_blueprint(user_bp)\n    app.register_blueprint(auth_bp)\n\n    return app\n</code></pre>"},{"location":"LEVEL_4_SCALABLE.html#project-directory-structure","title":"Project Directory Structure","text":"<p>A professional flask project looks like this:</p> <pre><code>project_root/\n\u251c\u2500\u2500 app/                  # Application Package\n\u2502   \u251c\u2500\u2500 __init__.py       # Contains create_app()\n\u2502   \u251c\u2500\u2500 extensions.py     # All extensions (db, jwt, etc)\n\u2502   \u251c\u2500\u2500 models/           # DB Models\n\u2502   \u2502   \u2514\u2500\u2500 user.py\n\u2502   \u251c\u2500\u2500 routes/           # Blueprints\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 user_routes.py\n\u2502   \u251c\u2500\u2500 schemas/          # Marshmallow Schemas\n\u2502   \u2502   \u2514\u2500\u2500 user_schema.py\n\u2502   \u2514\u2500\u2500 services/         # Business Logic\n\u2502       \u2514\u2500\u2500 user_service.py\n\u251c\u2500\u2500 config.py             # Settings (Dev/Prod)\n\u251c\u2500\u2500 wsgi.py               # Entry point for Server\n\u2514\u2500\u2500 requirements.txt\n</code></pre>"},{"location":"LEVEL_4_SCALABLE.html#wsgipy-the-entry-point","title":"<code>wsgi.py</code> (The Entry Point)","text":"<p>This is what your server (Gunicorn/uWSGI) runs.</p> <pre><code>from app import create_app\n\napplication = create_app()\n\nif __name__ == \"__main__\":\n    application.run(debug=True)\n</code></pre>"},{"location":"LEVEL_4_SCALABLE.html#configuration-management","title":"Configuration Management","text":"<p>Avoid hardcoding. Use classes for config.</p>"},{"location":"LEVEL_4_SCALABLE.html#configpy","title":"<code>config.py</code>","text":"<pre><code>import os\n\nclass Config:\n    SECRET_KEY = os.environ.get('SECRET_KEY', 'default-dev-key')\n    SQLALCHEMY_TRACK_MODIFICATIONS = False\n\nclass DevConfig(Config):\n    SQLALCHEMY_DATABASE_URI = 'sqlite:///dev.db'\n    DEBUG = True\n\nclass ProdConfig(Config):\n    SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL')\n    DEBUG = False\n</code></pre> <p>Then pass it to the factory: <code>create_app(DevConfig)</code></p>"},{"location":"LEVEL_4_SCALABLE.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_4_SCALABLE.html#problem-1-refactor-to-factory","title":"Problem 1: Refactor to Factory","text":"<p>Take your code from Level 3.</p> <ol> <li>Create <code>extensions.py</code>.</li> <li>Move global <code>app</code> var to <code>create_app</code> in <code>app/__init__.py</code>.</li> <li>Create <code>wsgi.py</code>.</li> <li>Run it!</li> </ol>"},{"location":"LEVEL_4_SCALABLE.html#problem-2-circular-import-fix","title":"Problem 2: Circular Import Fix","text":"<p>Intentionally create a circular import (e.g., import <code>app</code> inside <code>extensions.py</code>). Observe the error. Then fix it by following the pattern above.</p>"},{"location":"LEVEL_4_SCALABLE.html#problem-3-environment-config","title":"Problem 3: Environment Config","text":"<p>Create a <code>TestConfig</code> that uses an in-memory database (<code>sqlite:///:memory:</code>). Update <code>create_app</code> to use it when running tests.</p>"},{"location":"LEVEL_4_SCALABLE.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_4_SCALABLE.html#question-1","title":"Question 1","text":"<p>Why do we use <code>extensions.py</code>?</p> <ul> <li>[ ] To make the code look prettier</li> <li>[x] To avoid circular imports by creating extensions unbound to the app</li> <li>[ ] Because Flask requires it</li> <li>[ ] To store database passwords</li> </ul>"},{"location":"LEVEL_4_SCALABLE.html#question-2","title":"Question 2","text":"<p>What does <code>init_app</code> do?</p> <ul> <li>[ ] Deletes the database</li> <li>[ ] Creates a new app</li> <li>[x] Binds an extension instance (like <code>db</code>) to a specific Flask app instance</li> <li>[ ] Installs the library</li> </ul>"},{"location":"LEVEL_4_SCALABLE.html#question-3","title":"Question 3","text":"<p>Which file is the entry point for production servers (like Gunicorn)?</p> <ul> <li>[ ] <code>routes.py</code></li> <li>[ ] <code>extensions.py</code></li> <li>[x] <code>wsgi.py</code></li> <li>[ ] <code>config.py</code></li> </ul>"},{"location":"LEVEL_5_EXTENSIONS.html","title":"Level 5: Expert - Powerful Extensions","text":""},{"location":"LEVEL_5_EXTENSIONS.html#goal","title":"Goal","text":"<p>In the final level, we stop reinventing the wheel. We will use Flask-Restx to get auto-generated Swagger documentation (like DRF's browserable API) and Flask-Admin for an instant internal dashboard.</p>"},{"location":"LEVEL_5_EXTENSIONS.html#table-of-contents","title":"Table of Contents","text":"<ol> <li>Flask-Restx: Better APIs</li> <li>Documenting with Swagger</li> <li>Flask-Admin: Instant Dashboard</li> <li>Deployment Note</li> <li>Practice Problems</li> </ol>"},{"location":"LEVEL_5_EXTENSIONS.html#flask-restx-better-apis","title":"Flask-Restx: Better APIs","text":"<p><code>Flask-Restx</code> adds structure and documentation. It's similar to DRF.</p>"},{"location":"LEVEL_5_EXTENSIONS.html#setup","title":"Setup","text":"<pre><code>pip install flask-restx\n</code></pre>"},{"location":"LEVEL_5_EXTENSIONS.html#usage-with-blueprints","title":"Usage with Blueprints","text":"<p>Instead of <code>Blueprint</code>, we use <code>Namespace</code>.</p> <p><code>routes/api_routes.py</code></p> <pre><code>from flask_restx import Namespace, Resource, fields\nfrom services.user_service import UserService\n\n# Define Namespace (like Blueprint)\napi = Namespace('users', description='User operations')\n\n# Define Model (for Swagger Docs)\nuser_model = api.model('User', {\n    'id': fields.Integer(readonly=True),\n    'username': fields.String(required=True),\n    'email': fields.String(required=True)\n})\n\n@api.route('/')\nclass UserList(Resource):\n    @api.doc('list_users')\n    @api.marshal_list_with(user_model)\n    def get(self):\n        \"\"\"List all users\"\"\"\n        return UserService.get_all_users()\n\n    @api.doc('create_user')\n    @api.expect(user_model)\n    @api.marshal_with(user_model, code=201)\n    def post(self):\n        \"\"\"Create a new user\"\"\"\n        data = api.payload\n        return UserService.create_user(data['username'], data['email']), 201\n</code></pre>"},{"location":"LEVEL_5_EXTENSIONS.html#registering-in-app__init__py-factory","title":"Registering in <code>app/__init__.py</code> (Factory)","text":"<pre><code>from flask_restx import Api\nfrom routes.api_routes import api as user_ns\n\ndef create_app():\n    # ... init app ...\n\n    # Init Restx API\n    api = Api(app, title='My API', version='1.0', description='Main API')\n\n    # Add Namespaces\n    api.add_namespace(user_ns, path='/api/users')\n\n    return app\n</code></pre>"},{"location":"LEVEL_5_EXTENSIONS.html#documenting-with-swagger","title":"Documenting with Swagger","text":"<p>Good news! If you used Flask-Restx as above, you already have it.</p> <ol> <li>Run your app.</li> <li>Go to <code>http://127.0.0.1:5000/</code>.</li> <li>You will see a beautiful Swagger UI where you can try out your API endpoints.</li> </ol> <p>Why Use It?</p> <ul> <li>Clients/Frontend devs can see exactly what JSON to send.</li> <li>They can test it directly in the browser.</li> <li>It stays up-to-date automatically as you change code.</li> </ul>"},{"location":"LEVEL_5_EXTENSIONS.html#flask-admin-instant-dashboard","title":"Flask-Admin: Instant Dashboard","text":"<p>Need a backend to manage users/data? Don't build it.</p>"},{"location":"LEVEL_5_EXTENSIONS.html#setup_1","title":"Setup","text":"<pre><code>pip install flask-admin\n</code></pre>"},{"location":"LEVEL_5_EXTENSIONS.html#usage","title":"Usage","text":"<p><code>extensions.py</code></p> <pre><code>from flask_admin import Admin\nadmin = Admin(name='My Dashboard', template_mode='bootstrap3')\n</code></pre> <p><code>app/__init__.py</code></p> <pre><code>from extensions import admin\nfrom models.user import User\nfrom flask_admin.contrib.sqla import ModelView\n\ndef create_app():\n    # ...\n    admin.init_app(app)\n\n    # Add Views\n    with app.app_context():\n        # You might need to import db here to register views\n        from extensions import db\n        admin.add_view(ModelView(User, db.session))\n\n    return app\n</code></pre> <p>Visit <code>http://localhost:5000/admin</code> to see your data.</p>"},{"location":"LEVEL_5_EXTENSIONS.html#deployment-note","title":"Deployment Note","text":"<p>When deploying (e.g., to AWS, Heroku, DigitalOcean):</p> <ol> <li>Never use <code>app.run()</code>: That's only for development.</li> <li>Use Gunicorn: <code>gunicorn -w 4 wsgi:application</code></li> <li>Set Environment Variables:</li> <li><code>FLASK_ENV=production</code></li> <li><code>SECRET_KEY=...</code> (Strong random string)</li> <li><code>DATABASE_URL=...</code> (Your prod DB)</li> </ol>"},{"location":"LEVEL_5_EXTENSIONS.html#practice-problems","title":"Practice Problems","text":""},{"location":"LEVEL_5_EXTENSIONS.html#problem-1-first-swagger","title":"Problem 1: First Swagger","text":"<p>Convert your \"Hello World\" or \"Books\" API to use Flask-Restx. Verify you can see the Swagger UI.</p>"},{"location":"LEVEL_5_EXTENSIONS.html#problem-2-documenting-input","title":"Problem 2: Documenting Input","text":"<p>Use <code>@api.expect(model)</code> to document what fields are required for creating a book (title, author).</p>"},{"location":"LEVEL_5_EXTENSIONS.html#problem-3-admin-panel","title":"Problem 3: Admin Panel","text":"<p>Add <code>Flask-Admin</code> to your project. Register your <code>User</code> and <code>Book</code> models. Try creating a user via the Admin UI.</p>"},{"location":"LEVEL_5_EXTENSIONS.html#trivia","title":"Trivia","text":""},{"location":"LEVEL_5_EXTENSIONS.html#question-1","title":"Question 1","text":"<p>What does Flask-Restx give you for free?</p> <ul> <li>[ ] A database</li> <li>[x] Swagger Documentation (UI)</li> <li>[ ] Faster performance</li> <li>[ ] Users</li> </ul>"},{"location":"LEVEL_5_EXTENSIONS.html#question-2","title":"Question 2","text":"<p>What server should you use for production?</p> <ul> <li>[ ] <code>app.run()</code></li> <li>[ ] The built-in development server</li> <li>[x] A WSGI server like Gunicorn or uWSGI</li> <li>[ ] None, Flask runs itself</li> </ul>"},{"location":"LEVEL_5_EXTENSIONS.html#question-3","title":"Question 3","text":"<p>In Flask-Restx, what replaces the Concept of a Blueprint?</p> <ul> <li>[ ] <code>Module</code></li> <li>[ ] <code>Component</code></li> <li>[x] <code>Namespace</code></li> <li>[ ] <code>Section</code></li> </ul>"}]}